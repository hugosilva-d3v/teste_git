echo "=== 1️⃣ Instalando Git ==="
sudo apt update
sudo apt install git -y

echo "=== 2️⃣ Configurando usuário Git ==="
read -p "Digite seu nome: " git_name
read -p "Digite seu e-mail: " git_email
git config --global user.name "$git_name"
git config --global user.email "$git_email"

echo "=== 3️⃣ Verificando chaves SSH existentes ==="
ls ~/.ssh
echo "Se não houver 'id_ed25519', uma nova chave será criada."

echo "=== 4️⃣ Gerando nova chave SSH ==="
ssh-keygen -t ed25519 -C "$git_email" -f ~/.ssh/id_ed25519

echo "=== 5️⃣ Iniciando agente SSH e adicionando chave ==="
eval "$(ssh-agent -s)"
ssh-add ~/.ssh/id_ed25519

echo "=== 6️⃣ Exibindo chave pública (copie tudo) ==="
cat ~/.ssh/id_ed25519.pub
echo ""
echo "Copie a chave acima e adicione no GitHub em Settings -> SSH and GPG keys -> New SSH key."
echo "Título sugerido: 'Notebook Ubuntu'"

echo "=== 7️⃣ Testando conexão SSH com GitHub ==="
echo "Digite 'yes' se for perguntado sobre autenticidade do host"
ssh -T git@github.com

echo "✅ Configuração completa! Agora você pode usar SSH para push/pull sem senha."
